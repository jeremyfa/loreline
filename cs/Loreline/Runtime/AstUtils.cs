// Generated by Haxe 4.3.6
using global::Loreline.Internal.Root;

#pragma warning disable 109, 114, 219, 429, 168, 162, IL2026, IL2070, IL2072, IL2060, CS0108
namespace Loreline.Runtime {
	public class AstUtils : global::Loreline.Internal.Lang.HxObject {
		
		static AstUtils() {
			global::Loreline.Runtime.AstUtils.randomId_nonHexChars = "ghijklmnopqrstuvwxyz";
			global::Loreline.Runtime.AstUtils.randomId_chars = "0123456789abcdefghijklmnopqrstuvwxyz";
		}
		
		
		public AstUtils(global::Loreline.Internal.Lang.EmptyObject empty) {
		}
		
		
		public AstUtils() {
			global::Loreline.Runtime.AstUtils.__hx_ctor_loreline_AstUtils(this);
		}
		
		
		protected static void __hx_ctor_loreline_AstUtils(global::Loreline.Runtime.AstUtils __hx_this) {
		}
		
		
		public static string randomId_nonHexChars;
		
		public static string randomId_chars;
		
		public static void addQuotes(global::Loreline.Runtime.AstNode node) {
			node.each(( (( global::Loreline.Runtime.AstUtils_addQuotes_19__Fun.__hx_current != null )) ? (global::Loreline.Runtime.AstUtils_addQuotes_19__Fun.__hx_current) : (global::Loreline.Runtime.AstUtils_addQuotes_19__Fun.__hx_current = ((global::Loreline.Runtime.AstUtils_addQuotes_19__Fun) (new global::Loreline.Runtime.AstUtils_addQuotes_19__Fun()) )) ));
		}
		
		
		public static void removeQuotes(global::Loreline.Runtime.AstNode node) {
			node.each(( (( global::Loreline.Runtime.AstUtils_removeQuotes_39__Fun.__hx_current != null )) ? (global::Loreline.Runtime.AstUtils_removeQuotes_39__Fun.__hx_current) : (global::Loreline.Runtime.AstUtils_removeQuotes_39__Fun.__hx_current = ((global::Loreline.Runtime.AstUtils_removeQuotes_39__Fun) (new global::Loreline.Runtime.AstUtils_removeQuotes_39__Fun()) )) ));
		}
		
		
		public static void toBraceStyle(global::Loreline.Runtime.AstNode node) {
			node.each(( (( global::Loreline.Runtime.AstUtils_toBraceStyle_68__Fun.__hx_current != null )) ? (global::Loreline.Runtime.AstUtils_toBraceStyle_68__Fun.__hx_current) : (global::Loreline.Runtime.AstUtils_toBraceStyle_68__Fun.__hx_current = ((global::Loreline.Runtime.AstUtils_toBraceStyle_68__Fun) (new global::Loreline.Runtime.AstUtils_toBraceStyle_68__Fun()) )) ));
		}
		
		
		public static void toPlainStyle(global::Loreline.Runtime.AstNode node) {
			node.each(( (( global::Loreline.Runtime.AstUtils_toPlainStyle_87__Fun.__hx_current != null )) ? (global::Loreline.Runtime.AstUtils_toPlainStyle_87__Fun.__hx_current) : (global::Loreline.Runtime.AstUtils_toPlainStyle_87__Fun.__hx_current = ((global::Loreline.Runtime.AstUtils_toPlainStyle_87__Fun) (new global::Loreline.Runtime.AstUtils_toPlainStyle_87__Fun()) )) ));
		}
		
		
		public static void useWordOperators(global::Loreline.Runtime.AstNode node) {
			node.each(( (( global::Loreline.Runtime.AstUtils_useWordOperators_106__Fun.__hx_current != null )) ? (global::Loreline.Runtime.AstUtils_useWordOperators_106__Fun.__hx_current) : (global::Loreline.Runtime.AstUtils_useWordOperators_106__Fun.__hx_current = ((global::Loreline.Runtime.AstUtils_useWordOperators_106__Fun) (new global::Loreline.Runtime.AstUtils_useWordOperators_106__Fun()) )) ));
		}
		
		
		public static void useSymbolOperators(global::Loreline.Runtime.AstNode node) {
			node.each(( (( global::Loreline.Runtime.AstUtils_useSymbolOperators_120__Fun.__hx_current != null )) ? (global::Loreline.Runtime.AstUtils_useSymbolOperators_120__Fun.__hx_current) : (global::Loreline.Runtime.AstUtils_useSymbolOperators_120__Fun.__hx_current = ((global::Loreline.Runtime.AstUtils_useSymbolOperators_120__Fun) (new global::Loreline.Runtime.AstUtils_useSymbolOperators_120__Fun()) )) ));
		}
		
		
		public static void useParenConditions(global::Loreline.Runtime.AstNode node) {
			node.each(( (( global::Loreline.Runtime.AstUtils_useParenConditions_134__Fun.__hx_current != null )) ? (global::Loreline.Runtime.AstUtils_useParenConditions_134__Fun.__hx_current) : (global::Loreline.Runtime.AstUtils_useParenConditions_134__Fun.__hx_current = ((global::Loreline.Runtime.AstUtils_useParenConditions_134__Fun) (new global::Loreline.Runtime.AstUtils_useParenConditions_134__Fun()) )) ));
		}
		
		
		public static void usePlainConditions(global::Loreline.Runtime.AstNode node) {
			node.each(( (( global::Loreline.Runtime.AstUtils_usePlainConditions_142__Fun.__hx_current != null )) ? (global::Loreline.Runtime.AstUtils_usePlainConditions_142__Fun.__hx_current) : (global::Loreline.Runtime.AstUtils_usePlainConditions_142__Fun.__hx_current = ((global::Loreline.Runtime.AstUtils_usePlainConditions_142__Fun) (new global::Loreline.Runtime.AstUtils_usePlainConditions_142__Fun()) )) ));
		}
		
		
		public static void reindentFunctions(global::Loreline.Runtime.AstNode node, string oldIndent, string newIndent) {
			node.each(new global::Loreline.Runtime.AstUtils_reindentFunctions_150__Fun(oldIndent, newIndent));
		}
		
		
		public static string insertLocalizationKeys(string content, global::Loreline.Runtime.AstNode node) {
			global::Loreline.Runtime.Random rng = new global::Loreline.Runtime.Random(default(object));
			global::Loreline.Internal.Root.Array sourceLines = global::Loreline.Internal.Lang.StringExt.split(content, "\n");
			global::Loreline.Internal.Ds.StringMap existingIds = new global::Loreline.Internal.Ds.StringMap();
			node.each(new global::Loreline.Runtime.AstUtils_insertLocalizationKeys_174__Fun(existingIds));
			global::Loreline.Internal.Root.Array insertions = new global::Loreline.Internal.Root.Array(new object[]{});
			node.each(new global::Loreline.Runtime.AstUtils_insertLocalizationKeys_186__Fun(sourceLines, rng, insertions, existingIds));
			if (( insertions.length == 0 )) {
				return content;
			}
			
			insertions.sort(( (( global::Loreline.Runtime.AstUtils_insertLocalizationKeys_215__Fun.__hx_current != null )) ? (global::Loreline.Runtime.AstUtils_insertLocalizationKeys_215__Fun.__hx_current) : (global::Loreline.Runtime.AstUtils_insertLocalizationKeys_215__Fun.__hx_current = ((global::Loreline.Runtime.AstUtils_insertLocalizationKeys_215__Fun) (new global::Loreline.Runtime.AstUtils_insertLocalizationKeys_215__Fun()) )) ));
			string result = content;
			{
				int _g = 0;
				while (( _g < insertions.length )) {
					object ins = insertions.__get(_g);
					 ++ _g;
					object len = null;
					result = global::Loreline.Internal.Lang.Runtime.concat(global::Loreline.Internal.Lang.Runtime.concat(global::Loreline.Internal.Lang.StringExt.substr(result, 0, ((object) (global::Loreline.Internal.Lang.Runtime.getField_f(ins, "offset", 1614780307, true)) )), global::Loreline.Internal.Lang.Runtime.toString(global::Loreline.Internal.Lang.Runtime.getField(ins, "text", 1291439277, true))), global::Loreline.Internal.Lang.StringExt.substr(result, ((int) (global::Loreline.Internal.Lang.Runtime.getField_f(ins, "offset", 1614780307, true)) ), len));
				}
				
			}
			
			return result;
		}
		
		
		public static string removeLocalizationKeys(string content, global::Loreline.Runtime.AstNode node) {
			global::Loreline.Internal.Root.Array removals = new global::Loreline.Internal.Root.Array(new object[]{});
			node.each(new global::Loreline.Runtime.AstUtils_removeLocalizationKeys_227__Fun(removals, content));
			if (( removals.length == 0 )) {
				return content;
			}
			
			removals.sort(( (( global::Loreline.Runtime.AstUtils_removeLocalizationKeys_257__Fun.__hx_current != null )) ? (global::Loreline.Runtime.AstUtils_removeLocalizationKeys_257__Fun.__hx_current) : (global::Loreline.Runtime.AstUtils_removeLocalizationKeys_257__Fun.__hx_current = ((global::Loreline.Runtime.AstUtils_removeLocalizationKeys_257__Fun) (new global::Loreline.Runtime.AstUtils_removeLocalizationKeys_257__Fun()) )) ));
			string result = content;
			{
				int _g = 0;
				while (( _g < removals.length )) {
					object r = removals.__get(_g);
					 ++ _g;
					object len = null;
					result = global::Loreline.Internal.Lang.Runtime.concat(global::Loreline.Internal.Lang.StringExt.substr(result, 0, ((object) (global::Loreline.Internal.Lang.Runtime.getField_f(r, "start", 67859554, true)) )), global::Loreline.Internal.Lang.StringExt.substr(result, ((int) (global::Loreline.Internal.Lang.Runtime.getField_f(r, "end", 5047259, true)) ), len));
				}
				
			}
			
			return result;
		}
		
		
		public static bool lineHasHashComment(string line) {
			unchecked {
				int i = 0;
				while (( i < line.Length )) {
					if (global::Loreline.Internal.Lang.Runtime.eq(global::Loreline.Internal.Lang.StringExt.charCodeAt(line, i), 35)) {
						if (( ( ( i + 1 ) < line.Length ) && global::Loreline.Internal.Lang.Runtime.eq(global::Loreline.Internal.Lang.StringExt.charCodeAt(line, ( i + 1 )), 35) )) {
							i += 2;
							continue;
						}
						
						if (( ( i > 0 ) && global::Loreline.Internal.Lang.Runtime.eq(global::Loreline.Internal.Lang.StringExt.charCodeAt(line, ( i - 1 )), 92) )) {
							 ++ i;
							continue;
						}
						
						int j = ( i + 1 );
						while (( j < line.Length )) {
							object c = global::Loreline.Internal.Lang.StringExt.charCodeAt(line, j);
							if (( ( ( ( ( ( ((int) (global::Loreline.Internal.Lang.Runtime.toInt(c)) ) >= 97 ) && ( ((int) (global::Loreline.Internal.Lang.Runtime.toInt(c)) ) <= 122 ) ) || ( ( ((int) (global::Loreline.Internal.Lang.Runtime.toInt(c)) ) >= 65 ) && ( ((int) (global::Loreline.Internal.Lang.Runtime.toInt(c)) ) <= 90 ) ) ) || ( ( ((int) (global::Loreline.Internal.Lang.Runtime.toInt(c)) ) >= 48 ) && ( ((int) (global::Loreline.Internal.Lang.Runtime.toInt(c)) ) <= 57 ) ) ) || global::Loreline.Internal.Lang.Runtime.eq(c, 95) ) || global::Loreline.Internal.Lang.Runtime.eq(c, 45) )) {
								 ++ j;
							}
							else {
								break;
							}
							
						}
						
						if (( j > ( i + 1 ) )) {
							return true;
						}
						
					}
					
					 ++ i;
				}
				
				return false;
			}
		}
		
		
		public static global::Loreline.Internal.Ds.StringMap extractTranslations(global::Loreline.Runtime.AstNode node) {
			global::Loreline.Internal.Ds.StringMap result = new global::Loreline.Internal.Ds.StringMap();
			node.each(new global::Loreline.Runtime.AstUtils_extractTranslations_304__Fun(result));
			return result;
		}
		
		
		public static global::Loreline.Internal.Root.Array extractTranslatableEntries(global::Loreline.Runtime.AstNode node) {
			global::Loreline.Internal.Root.Array result = new global::Loreline.Internal.Root.Array(new object[]{});
			node.each(new global::Loreline.Runtime.AstUtils_extractTranslatableEntries_326__Fun(result));
			return result;
		}
		
		
		public static string generateTranslationFile(global::Loreline.Runtime.AstNode sourceScript, global::Loreline.Internal.Ds.StringMap existingTranslations, global::Loreline.Runtime.Printer printer) {
			global::Loreline.Internal.Root.Array entries = global::Loreline.Runtime.AstUtils.extractTranslatableEntries(sourceScript);
			global::System.Text.StringBuilder buf_b = new global::System.Text.StringBuilder();
			bool first = true;
			buf_b.Append(((string) ("\n") ));
			{
				int _g = 0;
				while (( _g < entries.length )) {
					object entry = entries.__get(_g);
					 ++ _g;
					if ( ! (first) ) {
						buf_b.Append(((string) ("\n") ));
					}
					
					first = false;
					string refText = printer.printStringLiteralAsReference(((global::Loreline.Runtime.NStringLiteral) (global::Loreline.Internal.Lang.Runtime.getField(entry, "str", 5744817, true)) ));
					string plainText = printer.printStringLiteralAsText(((global::Loreline.Runtime.NStringLiteral) (global::Loreline.Internal.Lang.Runtime.getField(entry, "str", 5744817, true)) ));
					buf_b.Append(((string) ("#") ));
					buf_b.Append(((string) (global::Loreline.Internal.Root.Std.@string(global::Loreline.Internal.Lang.Runtime.toString(global::Loreline.Internal.Lang.Runtime.getField(entry, "id", 23515, true)))) ));
					buf_b.Append(((string) (" // ") ));
					buf_b.Append(((string) (global::Loreline.Internal.Root.Std.@string(((string) (refText) ))) ));
					buf_b.Append(((string) ("\n") ));
					if (( ( existingTranslations != null ) && existingTranslations.exists(global::Loreline.Internal.Lang.Runtime.toString(global::Loreline.Internal.Lang.Runtime.getField(entry, "id", 23515, true))) )) {
						buf_b.Append(((string) (global::Loreline.Internal.Root.Std.@string(printer.printStringLiteralAsText(((global::Loreline.Runtime.NStringLiteral) (existingTranslations.@get(global::Loreline.Internal.Lang.Runtime.toString(global::Loreline.Internal.Lang.Runtime.getField(entry, "id", 23515, true)))) )))) ));
					}
					else {
						buf_b.Append(((string) (global::Loreline.Internal.Root.Std.@string(((string) (plainText) ))) ));
					}
					
					buf_b.Append(((string) ("\n") ));
				}
				
			}
			
			return buf_b.ToString();
		}
		
		
		public static string unquotedRawToQuotedRaw(string text) {
			unchecked {
				global::Loreline.Internal.Root.StringBuf result = new global::Loreline.Internal.Root.StringBuf();
				int i = 0;
				while (( i < text.Length )) {
					object c = global::Loreline.Internal.Lang.StringExt.charCodeAt(text, i);
					if (( global::Loreline.Internal.Lang.Runtime.eq(c, 92) && ( ( i + 1 ) < text.Length ) )) {
						object next = global::Loreline.Internal.Lang.StringExt.charCodeAt(text, ( i + 1 ));
						if (( ( ( ( global::Loreline.Internal.Lang.Runtime.eq(next, 110) || global::Loreline.Internal.Lang.Runtime.eq(next, 116) ) || global::Loreline.Internal.Lang.Runtime.eq(next, 114) ) || global::Loreline.Internal.Lang.Runtime.eq(next, 92) ) || global::Loreline.Internal.Lang.Runtime.eq(next, 60) )) {
							result.addChar(((int) (global::Loreline.Internal.Lang.Runtime.toInt(c)) ));
							result.addChar(((int) (global::Loreline.Internal.Lang.Runtime.toInt(next)) ));
							i += 2;
						}
						else {
							result.addChar(((int) (global::Loreline.Internal.Lang.Runtime.toInt(next)) ));
							i += 2;
						}
						
					}
					else if (global::Loreline.Internal.Lang.Runtime.eq(c, 34)) {
						result.b.Append(((string) ("\\\"") ));
						 ++ i;
					}
					else {
						result.addChar(((int) (global::Loreline.Internal.Lang.Runtime.toInt(c)) ));
						 ++ i;
					}
					
				}
				
				return result.b.ToString();
			}
		}
		
		
		public static string quotedRawToUnquotedRaw(string text) {
			unchecked {
				global::Loreline.Internal.Root.StringBuf result = new global::Loreline.Internal.Root.StringBuf();
				int i = 0;
				while (( i < text.Length )) {
					object c = global::Loreline.Internal.Lang.StringExt.charCodeAt(text, i);
					if (( global::Loreline.Internal.Lang.Runtime.eq(c, 92) && ( ( i + 1 ) < text.Length ) )) {
						object next = global::Loreline.Internal.Lang.StringExt.charCodeAt(text, ( i + 1 ));
						if (global::Loreline.Internal.Lang.Runtime.eq(next, 34)) {
							result.addChar(((int) (global::Loreline.Internal.Lang.Runtime.toInt(next)) ));
							i += 2;
						}
						else {
							result.addChar(((int) (global::Loreline.Internal.Lang.Runtime.toInt(c)) ));
							result.addChar(((int) (global::Loreline.Internal.Lang.Runtime.toInt(next)) ));
							i += 2;
						}
						
					}
					else {
						result.addChar(((int) (global::Loreline.Internal.Lang.Runtime.toInt(c)) ));
						 ++ i;
					}
					
				}
				
				return result.b.ToString();
			}
		}
		
		
		public static bool canSafelyRemoveQuotes(string text) {
			unchecked {
				if (( text.Length == 0 )) {
					return false;
				}
				
				if (( global::Loreline.Internal.Lang.StringExt.indexOf(text, "\n", null) != -1 )) {
					return false;
				}
				
				if (( global::Loreline.Internal.Lang.StringExt.indexOf(text, "{", null) != -1 )) {
					return false;
				}
				
				object firstChar = global::Loreline.Internal.Lang.StringExt.charCodeAt(text, 0);
				if (( ( ( ( ( ( global::Loreline.Internal.Lang.Runtime.eq(firstChar, 40) || global::Loreline.Internal.Lang.Runtime.eq(firstChar, 91) ) || global::Loreline.Internal.Lang.Runtime.eq(firstChar, 123) ) || global::Loreline.Internal.Lang.Runtime.eq(firstChar, 125) ) || global::Loreline.Internal.Lang.Runtime.eq(firstChar, 93) ) || global::Loreline.Internal.Lang.Runtime.eq(firstChar, 58) ) || global::Loreline.Internal.Lang.Runtime.eq(firstChar, 61) )) {
					return false;
				}
				
				if (( ( text.Length >= 2 ) && global::Loreline.Internal.Lang.Runtime.eq(firstChar, 47) )) {
					object second = global::Loreline.Internal.Lang.StringExt.charCodeAt(text, 1);
					if (( global::Loreline.Internal.Lang.Runtime.eq(second, 47) || global::Loreline.Internal.Lang.Runtime.eq(second, 42) )) {
						return false;
					}
					
				}
				
				if (( ( ( text.Length >= 2 ) && global::Loreline.Internal.Lang.Runtime.eq(firstChar, 45) ) && global::Loreline.Internal.Lang.Runtime.eq(global::Loreline.Internal.Lang.StringExt.charCodeAt(text, 1), 62) )) {
					return false;
				}
				
				if (( ( global::Loreline.Internal.Lang.Runtime.eq(firstChar, 43) && ( text.Length >= 3 ) ) && global::Loreline.Internal.Lang.Runtime.eq(global::Loreline.Internal.Lang.StringExt.charCodeAt(text, 1), 32) )) {
					return false;
				}
				
				global::Loreline.Internal.Root.Array keywords = new global::Loreline.Internal.Root.Array(new object[]{"beat ", "state ", "character ", "choice ", "import ", "new ", "function ", "if ", "else "});
				{
					int _g = 0;
					while (( _g < keywords.length )) {
						string kw = global::Loreline.Internal.Lang.Runtime.toString(keywords.__get(_g));
						 ++ _g;
						if (text.StartsWith(kw)) {
							return false;
						}
						
					}
					
				}
				
				int colonIdx = global::Loreline.Internal.Lang.StringExt.indexOf(text, ":", null);
				if (( colonIdx > 0 )) {
					bool allIdentChars = true;
					{
						int _g1 = 0;
						int _g2 = colonIdx;
						while (( _g1 < _g2 )) {
							int j = _g1++;
							object ch = global::Loreline.Internal.Lang.StringExt.charCodeAt(text, j);
							if ( ! ((( ( ( ( ( ((int) (global::Loreline.Internal.Lang.Runtime.toInt(ch)) ) >= 97 ) && ( ((int) (global::Loreline.Internal.Lang.Runtime.toInt(ch)) ) <= 122 ) ) || ( ( ((int) (global::Loreline.Internal.Lang.Runtime.toInt(ch)) ) >= 65 ) && ( ((int) (global::Loreline.Internal.Lang.Runtime.toInt(ch)) ) <= 90 ) ) ) || ( ( ((int) (global::Loreline.Internal.Lang.Runtime.toInt(ch)) ) >= 48 ) && ( ((int) (global::Loreline.Internal.Lang.Runtime.toInt(ch)) ) <= 57 ) ) ) || global::Loreline.Internal.Lang.Runtime.eq(ch, 95) ))) ) {
								allIdentChars = false;
								break;
							}
							
						}
						
					}
					
					if (allIdentChars) {
						return false;
					}
					
				}
				
				if (( ( ( text == "null" ) || ( text == "true" ) ) || ( text == "false" ) )) {
					return false;
				}
				
				if (global::Loreline.Runtime.AstUtils.isNumberLiteral(text)) {
					return false;
				}
				
				if (( text.Length >= 2 )) {
					object second1 = global::Loreline.Internal.Lang.StringExt.charCodeAt(text, 1);
					if (( global::Loreline.Internal.Lang.Runtime.eq(second1, 61) && (( ( ( global::Loreline.Internal.Lang.Runtime.eq(firstChar, 43) || global::Loreline.Internal.Lang.Runtime.eq(firstChar, 45) ) || global::Loreline.Internal.Lang.Runtime.eq(firstChar, 42) ) || global::Loreline.Internal.Lang.Runtime.eq(firstChar, 47) )) )) {
						return false;
					}
					
				}
				
				return true;
			}
		}
		
		
		public static bool isNumberLiteral(string text) {
			unchecked {
				if (( text.Length == 0 )) {
					return false;
				}
				
				int i = 0;
				if (global::Loreline.Internal.Lang.Runtime.eq(global::Loreline.Internal.Lang.StringExt.charCodeAt(text, 0), 45)) {
					 ++ i;
				}
				
				if (( i >= text.Length )) {
					return false;
				}
				
				bool hasDigit = false;
				bool hasDot = false;
				while (( i < text.Length )) {
					object c = global::Loreline.Internal.Lang.StringExt.charCodeAt(text, i);
					if (( ( ((int) (global::Loreline.Internal.Lang.Runtime.toInt(c)) ) >= 48 ) && ( ((int) (global::Loreline.Internal.Lang.Runtime.toInt(c)) ) <= 57 ) )) {
						hasDigit = true;
					}
					else if (( global::Loreline.Internal.Lang.Runtime.eq(c, 46) &&  ! (hasDot)  )) {
						hasDot = true;
					}
					else {
						return false;
					}
					
					 ++ i;
				}
				
				return hasDigit;
			}
		}
		
		
		public static string reindentCode(string code, string oldIndent, string newIndent) {
			if (( oldIndent == newIndent )) {
				return code;
			}
			
			global::Loreline.Internal.Root.Array lines = global::Loreline.Internal.Lang.StringExt.split(code, "\n");
			global::System.Text.StringBuilder result_b = new global::System.Text.StringBuilder();
			{
				int _g = 0;
				int _g1 = lines.length;
				while (( _g < _g1 )) {
					int i = _g++;
					if (( i > 0 )) {
						result_b.Append(((string) ("\n") ));
					}
					
					string line = global::Loreline.Internal.Lang.Runtime.toString(lines.__get(i));
					int level = 0;
					int pos = 0;
					while (global::Loreline.Internal.Lang.StringExt.substr(line, pos, null).StartsWith(oldIndent)) {
						 ++ level;
						pos += oldIndent.Length;
					}
					
					{
						int _g2 = 0;
						int _g3 = level;
						while (( _g2 < _g3 )) {
							int _ = _g2++;
							result_b.Append(((string) (global::Loreline.Internal.Root.Std.@string(((string) (newIndent) ))) ));
						}
						
					}
					
					result_b.Append(((string) (global::Loreline.Internal.Root.Std.@string(global::Loreline.Internal.Lang.StringExt.substr(line, pos, null))) ));
				}
				
			}
			
			return result_b.ToString();
		}
		
		
		public static int getStringEndLine(global::Loreline.Runtime.NStringLiteral str) {
			unchecked {
				int endLine = str.pos.line;
				{
					int _g = 0;
					global::Loreline.Internal.Root.Array _g1 = str.parts;
					while (( _g < _g1.length )) {
						global::Loreline.Runtime.NStringPart part = ((global::Loreline.Runtime.NStringPart) (_g1.__get(_g)) );
						 ++ _g;
						if (( part.pos != null )) {
							int partEndLine = part.pos.line;
							{
								global::Loreline.Runtime.StringPartType _g2 = part.partType;
								if (( _g2._hx_index == 0 )) {
									string text = ( _g2 as global::Loreline.Runtime.StringPartType_Raw ).text;
									{
										int i = 0;
										while (( i < text.Length )) {
											if (global::Loreline.Internal.Lang.Runtime.eq(global::Loreline.Internal.Lang.StringExt.charCodeAt(text, i), 10)) {
												 ++ partEndLine;
											}
											
											 ++ i;
										}
										
									}
									
								}
								
							}
							
							if (( partEndLine > endLine )) {
								endLine = partEndLine;
							}
							
						}
						
					}
					
				}
				
				return endLine;
			}
		}
		
		
		public static string findHashComment(global::Loreline.Runtime.AstNode node, global::Loreline.Runtime.NStringLiteral str) {
			if (( node.trailingComments != null )) {
				int _g = 0;
				global::Loreline.Internal.Root.Array _g1 = node.trailingComments;
				while (( _g < _g1.length )) {
					global::Loreline.Runtime.Comment c = ((global::Loreline.Runtime.Comment) (_g1.__get(_g)) );
					 ++ _g;
					if (c.isHash) {
						return c.content.Trim();
					}
					
				}
				
			}
			
			if (( node.leadingComments != null )) {
				int _g2 = 0;
				global::Loreline.Internal.Root.Array _g3 = node.leadingComments;
				while (( _g2 < _g3.length )) {
					global::Loreline.Runtime.Comment c1 = ((global::Loreline.Runtime.Comment) (_g3.__get(_g2)) );
					 ++ _g2;
					if (c1.isHash) {
						return c1.content.Trim();
					}
					
				}
				
			}
			
			if (( str != null )) {
				if (( str.trailingComments != null )) {
					int _g4 = 0;
					global::Loreline.Internal.Root.Array _g5 = str.trailingComments;
					while (( _g4 < _g5.length )) {
						global::Loreline.Runtime.Comment c2 = ((global::Loreline.Runtime.Comment) (_g5.__get(_g4)) );
						 ++ _g4;
						if (c2.isHash) {
							return c2.content.Trim();
						}
						
					}
					
				}
				
				if (( str.leadingComments != null )) {
					int _g6 = 0;
					global::Loreline.Internal.Root.Array _g7 = str.leadingComments;
					while (( _g6 < _g7.length )) {
						global::Loreline.Runtime.Comment c3 = ((global::Loreline.Runtime.Comment) (_g7.__get(_g6)) );
						 ++ _g6;
						if (c3.isHash) {
							return c3.content.Trim();
						}
						
					}
					
				}
				
			}
			
			return null;
		}
		
		
		public static string randomId(global::Loreline.Runtime.Random rng, int length) {
			unchecked {
				global::Loreline.Internal.Root.StringBuf buf = new global::Loreline.Internal.Root.StringBuf();
				{
					int _g = 0;
					int _g1 = length;
					while (( _g < _g1 )) {
						int _ = _g++;
						buf.addChar(((int) (global::Loreline.Internal.Lang.Runtime.toInt(global::Loreline.Internal.Lang.StringExt.charCodeAt(global::Loreline.Runtime.AstUtils.randomId_chars, ((int) (global::System.Math.Floor(((double) (( 36 * (( ( (rng.seed = ( ( rng.seed * 16807 ) % 2147483647 )) / 2147483647 ) + 0.000000000233 )) )) ))) )))) ));
					}
					
				}
				
				string result = buf.b.ToString();
				bool allHex = true;
				{
					int _g2 = 0;
					int _g3 = result.Length;
					while (( _g2 < _g3 )) {
						int i = _g2++;
						object c = global::Loreline.Internal.Lang.StringExt.charCodeAt(result, i);
						if ( ! ((( ( ( ((int) (global::Loreline.Internal.Lang.Runtime.toInt(c)) ) >= 48 ) && ( ((int) (global::Loreline.Internal.Lang.Runtime.toInt(c)) ) <= 57 ) ) || ( ( ((int) (global::Loreline.Internal.Lang.Runtime.toInt(c)) ) >= 97 ) && ( ((int) (global::Loreline.Internal.Lang.Runtime.toInt(c)) ) <= 102 ) ) ))) ) {
							allHex = false;
							break;
						}
						
					}
					
				}
				
				if (allHex) {
					int pos = ((int) (global::System.Math.Floor(((double) (( length * (( ( (rng.seed = ( ( rng.seed * 16807 ) % 2147483647 )) / 2147483647 ) + 0.000000000233 )) )) ))) );
					object replacement = global::Loreline.Internal.Lang.StringExt.charCodeAt(global::Loreline.Runtime.AstUtils.randomId_nonHexChars, ((int) (global::System.Math.Floor(((double) (( global::Loreline.Runtime.AstUtils.randomId_nonHexChars.Length * (( ( (rng.seed = ( ( rng.seed * 16807 ) % 2147483647 )) / 2147483647 ) + 0.000000000233 )) )) ))) ));
					result = global::Loreline.Internal.Lang.Runtime.concat(global::Loreline.Internal.Lang.Runtime.concat(global::Loreline.Internal.Lang.StringExt.substr(result, 0, pos), global::Loreline.Internal.Lang.StringExt.fromCharCode(((int) (global::Loreline.Internal.Lang.Runtime.toInt(replacement)) ))), global::Loreline.Internal.Lang.StringExt.substr(result, ( pos + 1 ), null));
				}
				
				return result;
			}
		}
		
		
	}
}



#pragma warning disable 109, 114, 219, 429, 168, 162, IL2026, IL2070, IL2072, IL2060, CS0108
namespace Loreline.Runtime {
	public class AstUtils_addQuotes_19__Fun : global::Loreline.Internal.Lang.Function {
		
		public AstUtils_addQuotes_19__Fun() : base(2, 0) {
		}
		
		
		public static global::Loreline.Runtime.AstUtils_addQuotes_19__Fun __hx_current;
		
		public override object __hx_invoke2_o(double __fn_float1, object __fn_dyn1, double __fn_float2, object __fn_dyn2) {
			unchecked {
				global::Loreline.Runtime.Node _ = ( (( __fn_dyn2 == global::Loreline.Internal.Lang.Runtime.undefined )) ? (((global::Loreline.Runtime.Node) (((object) (__fn_float2) )) )) : (((global::Loreline.Runtime.Node) (__fn_dyn2) )) );
				global::Loreline.Runtime.Node child = ( (( __fn_dyn1 == global::Loreline.Internal.Lang.Runtime.undefined )) ? (((global::Loreline.Runtime.Node) (((object) (__fn_float1) )) )) : (((global::Loreline.Runtime.Node) (__fn_dyn1) )) );
				if (( child is global::Loreline.Runtime.NStringLiteral )) {
					global::Loreline.Runtime.NStringLiteral str = ((global::Loreline.Runtime.NStringLiteral) (child) );
					if (( str.quotes == ((int) (0) ) )) {
						str.quotes = ((int) (1) );
						{
							int _g = 0;
							int _g1 = str.parts.length;
							while (( _g < _g1 )) {
								int i = _g++;
								{
									global::Loreline.Runtime.StringPartType _g2 = ((global::Loreline.Runtime.NStringPart) (str.parts.__get(i)) ).partType;
									if (( _g2._hx_index == 0 )) {
										string text = ( _g2 as global::Loreline.Runtime.StringPartType_Raw ).text;
										string tmp = global::Loreline.Runtime.AstUtils.unquotedRawToQuotedRaw(text);
										((global::Loreline.Runtime.NStringPart) (str.parts.__get(i)) ).partType = global::Loreline.Runtime.StringPartType.Raw(tmp);
									}
									
								}
								
							}
							
						}
						
					}
					
				}
				
				return null;
			}
		}
		
		
	}
}



#pragma warning disable 109, 114, 219, 429, 168, 162, IL2026, IL2070, IL2072, IL2060, CS0108
namespace Loreline.Runtime {
	public class AstUtils_removeQuotes_39__Fun : global::Loreline.Internal.Lang.Function {
		
		public AstUtils_removeQuotes_39__Fun() : base(2, 0) {
		}
		
		
		public static global::Loreline.Runtime.AstUtils_removeQuotes_39__Fun __hx_current;
		
		public override object __hx_invoke2_o(double __fn_float1, object __fn_dyn1, double __fn_float2, object __fn_dyn2) {
			unchecked {
				global::Loreline.Runtime.Node _ = ( (( __fn_dyn2 == global::Loreline.Internal.Lang.Runtime.undefined )) ? (((global::Loreline.Runtime.Node) (((object) (__fn_float2) )) )) : (((global::Loreline.Runtime.Node) (__fn_dyn2) )) );
				global::Loreline.Runtime.Node child = ( (( __fn_dyn1 == global::Loreline.Internal.Lang.Runtime.undefined )) ? (((global::Loreline.Runtime.Node) (((object) (__fn_float1) )) )) : (((global::Loreline.Runtime.Node) (__fn_dyn1) )) );
				if (( child is global::Loreline.Runtime.NStringLiteral )) {
					global::Loreline.Runtime.NStringLiteral str = ((global::Loreline.Runtime.NStringLiteral) (child) );
					if (( str.quotes == ((int) (1) ) )) {
						string fullText = "";
						{
							int _g = 0;
							global::Loreline.Internal.Root.Array _g1 = str.parts;
							while (( _g < _g1.length )) {
								global::Loreline.Runtime.NStringPart part = ((global::Loreline.Runtime.NStringPart) (_g1.__get(_g)) );
								 ++ _g;
								{
									global::Loreline.Runtime.StringPartType _g2 = part.partType;
									if (( _g2._hx_index == 0 )) {
										string text = ( _g2 as global::Loreline.Runtime.StringPartType_Raw ).text;
										fullText = global::Loreline.Internal.Lang.Runtime.concat(fullText, text);
									}
									
								}
								
							}
							
						}
						
						if (global::Loreline.Runtime.AstUtils.canSafelyRemoveQuotes(fullText)) {
							str.quotes = ((int) (0) );
							{
								int _g3 = 0;
								int _g4 = str.parts.length;
								while (( _g3 < _g4 )) {
									int i = _g3++;
									{
										global::Loreline.Runtime.StringPartType _g5 = ((global::Loreline.Runtime.NStringPart) (str.parts.__get(i)) ).partType;
										if (( _g5._hx_index == 0 )) {
											string text1 = ( _g5 as global::Loreline.Runtime.StringPartType_Raw ).text;
											string tmp = global::Loreline.Runtime.AstUtils.quotedRawToUnquotedRaw(text1);
											((global::Loreline.Runtime.NStringPart) (str.parts.__get(i)) ).partType = global::Loreline.Runtime.StringPartType.Raw(tmp);
										}
										
									}
									
								}
								
							}
							
						}
						
					}
					
				}
				
				return null;
			}
		}
		
		
	}
}



#pragma warning disable 109, 114, 219, 429, 168, 162, IL2026, IL2070, IL2072, IL2060, CS0108
namespace Loreline.Runtime {
	public class AstUtils_toBraceStyle_68__Fun : global::Loreline.Internal.Lang.Function {
		
		public AstUtils_toBraceStyle_68__Fun() : base(2, 0) {
		}
		
		
		public static global::Loreline.Runtime.AstUtils_toBraceStyle_68__Fun __hx_current;
		
		public override object __hx_invoke2_o(double __fn_float1, object __fn_dyn1, double __fn_float2, object __fn_dyn2) {
			unchecked {
				global::Loreline.Runtime.Node _ = ( (( __fn_dyn2 == global::Loreline.Internal.Lang.Runtime.undefined )) ? (((global::Loreline.Runtime.Node) (((object) (__fn_float2) )) )) : (((global::Loreline.Runtime.Node) (__fn_dyn2) )) );
				global::Loreline.Runtime.Node child = ( (( __fn_dyn1 == global::Loreline.Internal.Lang.Runtime.undefined )) ? (((global::Loreline.Runtime.Node) (((object) (__fn_float1) )) )) : (((global::Loreline.Runtime.Node) (__fn_dyn1) )) );
				if (( child is global::Loreline.Runtime.NStateDecl )) {
					(((global::Loreline.Runtime.NStateDecl) (child) )).style = ((int) (1) );
				}
				else if (( child is global::Loreline.Runtime.NCharacterDecl )) {
					(((global::Loreline.Runtime.NCharacterDecl) (child) )).style = ((int) (1) );
				}
				else if (( child is global::Loreline.Runtime.NBeatDecl )) {
					(((global::Loreline.Runtime.NBeatDecl) (child) )).style = ((int) (1) );
				}
				else if (( child is global::Loreline.Runtime.NChoiceStatement )) {
					(((global::Loreline.Runtime.NChoiceStatement) (child) )).style = ((int) (1) );
				}
				else if (( child is global::Loreline.Runtime.NChoiceOption )) {
					(((global::Loreline.Runtime.NChoiceOption) (child) )).style = ((int) (1) );
				}
				else if (( child is global::Loreline.Runtime.NBlock )) {
					(((global::Loreline.Runtime.NBlock) (child) )).style = ((int) (1) );
				}
				else if (( child is global::Loreline.Runtime.NLiteral )) {
					global::Loreline.Runtime.NLiteral lit = ((global::Loreline.Runtime.NLiteral) (child) );
					{
						global::Loreline.Runtime.LiteralType _g = lit.literalType;
						if (( _g._hx_index == 4 )) {
							int _g1 = ( _g as global::Loreline.Runtime.LiteralType_Object ).style;
							lit.literalType = global::Loreline.Runtime.LiteralType.Object(((int) (1) ));
						}
						
					}
					
				}
				
				return null;
			}
		}
		
		
	}
}



#pragma warning disable 109, 114, 219, 429, 168, 162, IL2026, IL2070, IL2072, IL2060, CS0108
namespace Loreline.Runtime {
	public class AstUtils_toPlainStyle_87__Fun : global::Loreline.Internal.Lang.Function {
		
		public AstUtils_toPlainStyle_87__Fun() : base(2, 0) {
		}
		
		
		public static global::Loreline.Runtime.AstUtils_toPlainStyle_87__Fun __hx_current;
		
		public override object __hx_invoke2_o(double __fn_float1, object __fn_dyn1, double __fn_float2, object __fn_dyn2) {
			unchecked {
				global::Loreline.Runtime.Node _ = ( (( __fn_dyn2 == global::Loreline.Internal.Lang.Runtime.undefined )) ? (((global::Loreline.Runtime.Node) (((object) (__fn_float2) )) )) : (((global::Loreline.Runtime.Node) (__fn_dyn2) )) );
				global::Loreline.Runtime.Node child = ( (( __fn_dyn1 == global::Loreline.Internal.Lang.Runtime.undefined )) ? (((global::Loreline.Runtime.Node) (((object) (__fn_float1) )) )) : (((global::Loreline.Runtime.Node) (__fn_dyn1) )) );
				if (( child is global::Loreline.Runtime.NStateDecl )) {
					(((global::Loreline.Runtime.NStateDecl) (child) )).style = ((int) (0) );
				}
				else if (( child is global::Loreline.Runtime.NCharacterDecl )) {
					(((global::Loreline.Runtime.NCharacterDecl) (child) )).style = ((int) (0) );
				}
				else if (( child is global::Loreline.Runtime.NBeatDecl )) {
					(((global::Loreline.Runtime.NBeatDecl) (child) )).style = ((int) (0) );
				}
				else if (( child is global::Loreline.Runtime.NChoiceStatement )) {
					(((global::Loreline.Runtime.NChoiceStatement) (child) )).style = ((int) (0) );
				}
				else if (( child is global::Loreline.Runtime.NChoiceOption )) {
					(((global::Loreline.Runtime.NChoiceOption) (child) )).style = ((int) (0) );
				}
				else if (( child is global::Loreline.Runtime.NBlock )) {
					(((global::Loreline.Runtime.NBlock) (child) )).style = ((int) (0) );
				}
				else if (( child is global::Loreline.Runtime.NLiteral )) {
					global::Loreline.Runtime.NLiteral lit = ((global::Loreline.Runtime.NLiteral) (child) );
					{
						global::Loreline.Runtime.LiteralType _g = lit.literalType;
						if (( _g._hx_index == 4 )) {
							int _g1 = ( _g as global::Loreline.Runtime.LiteralType_Object ).style;
							lit.literalType = global::Loreline.Runtime.LiteralType.Object(((int) (0) ));
						}
						
					}
					
				}
				
				return null;
			}
		}
		
		
	}
}



#pragma warning disable 109, 114, 219, 429, 168, 162, IL2026, IL2070, IL2072, IL2060, CS0108
namespace Loreline.Runtime {
	public class AstUtils_useWordOperators_106__Fun : global::Loreline.Internal.Lang.Function {
		
		public AstUtils_useWordOperators_106__Fun() : base(2, 0) {
		}
		
		
		public static global::Loreline.Runtime.AstUtils_useWordOperators_106__Fun __hx_current;
		
		public override object __hx_invoke2_o(double __fn_float1, object __fn_dyn1, double __fn_float2, object __fn_dyn2) {
			unchecked {
				global::Loreline.Runtime.Node _ = ( (( __fn_dyn2 == global::Loreline.Internal.Lang.Runtime.undefined )) ? (((global::Loreline.Runtime.Node) (((object) (__fn_float2) )) )) : (((global::Loreline.Runtime.Node) (__fn_dyn2) )) );
				global::Loreline.Runtime.Node child = ( (( __fn_dyn1 == global::Loreline.Internal.Lang.Runtime.undefined )) ? (((global::Loreline.Runtime.Node) (((object) (__fn_float1) )) )) : (((global::Loreline.Runtime.Node) (__fn_dyn1) )) );
				if (( child is global::Loreline.Runtime.NBinary )) {
					global::Loreline.Runtime.NBinary bin = ((global::Loreline.Runtime.NBinary) (child) );
					{
						global::Loreline.Runtime.TokenType _g = bin.op;
						switch (_g._hx_index) {
							case 30:
							{
								bool _g1 = ( _g as global::Loreline.Runtime.TokenType_OpAnd ).word;
								bin.op = global::Loreline.Runtime.TokenType.OpAnd(true);
								break;
							}
							
							
							case 31:
							{
								bool _g2 = ( _g as global::Loreline.Runtime.TokenType_OpOr ).word;
								bin.op = global::Loreline.Runtime.TokenType.OpOr(true);
								break;
							}
							
							
							default:
							{
								break;
							}
							
						}
						
					}
					
				}
				
				return null;
			}
		}
		
		
	}
}



#pragma warning disable 109, 114, 219, 429, 168, 162, IL2026, IL2070, IL2072, IL2060, CS0108
namespace Loreline.Runtime {
	public class AstUtils_useSymbolOperators_120__Fun : global::Loreline.Internal.Lang.Function {
		
		public AstUtils_useSymbolOperators_120__Fun() : base(2, 0) {
		}
		
		
		public static global::Loreline.Runtime.AstUtils_useSymbolOperators_120__Fun __hx_current;
		
		public override object __hx_invoke2_o(double __fn_float1, object __fn_dyn1, double __fn_float2, object __fn_dyn2) {
			unchecked {
				global::Loreline.Runtime.Node _ = ( (( __fn_dyn2 == global::Loreline.Internal.Lang.Runtime.undefined )) ? (((global::Loreline.Runtime.Node) (((object) (__fn_float2) )) )) : (((global::Loreline.Runtime.Node) (__fn_dyn2) )) );
				global::Loreline.Runtime.Node child = ( (( __fn_dyn1 == global::Loreline.Internal.Lang.Runtime.undefined )) ? (((global::Loreline.Runtime.Node) (((object) (__fn_float1) )) )) : (((global::Loreline.Runtime.Node) (__fn_dyn1) )) );
				if (( child is global::Loreline.Runtime.NBinary )) {
					global::Loreline.Runtime.NBinary bin = ((global::Loreline.Runtime.NBinary) (child) );
					{
						global::Loreline.Runtime.TokenType _g = bin.op;
						switch (_g._hx_index) {
							case 30:
							{
								bool _g1 = ( _g as global::Loreline.Runtime.TokenType_OpAnd ).word;
								bin.op = global::Loreline.Runtime.TokenType.OpAnd(false);
								break;
							}
							
							
							case 31:
							{
								bool _g2 = ( _g as global::Loreline.Runtime.TokenType_OpOr ).word;
								bin.op = global::Loreline.Runtime.TokenType.OpOr(false);
								break;
							}
							
							
							default:
							{
								break;
							}
							
						}
						
					}
					
				}
				
				return null;
			}
		}
		
		
	}
}



#pragma warning disable 109, 114, 219, 429, 168, 162, IL2026, IL2070, IL2072, IL2060, CS0108
namespace Loreline.Runtime {
	public class AstUtils_useParenConditions_134__Fun : global::Loreline.Internal.Lang.Function {
		
		public AstUtils_useParenConditions_134__Fun() : base(2, 0) {
		}
		
		
		public static global::Loreline.Runtime.AstUtils_useParenConditions_134__Fun __hx_current;
		
		public override object __hx_invoke2_o(double __fn_float1, object __fn_dyn1, double __fn_float2, object __fn_dyn2) {
			unchecked {
				global::Loreline.Runtime.Node _ = ( (( __fn_dyn2 == global::Loreline.Internal.Lang.Runtime.undefined )) ? (((global::Loreline.Runtime.Node) (((object) (__fn_float2) )) )) : (((global::Loreline.Runtime.Node) (__fn_dyn2) )) );
				global::Loreline.Runtime.Node child = ( (( __fn_dyn1 == global::Loreline.Internal.Lang.Runtime.undefined )) ? (((global::Loreline.Runtime.Node) (((object) (__fn_float1) )) )) : (((global::Loreline.Runtime.Node) (__fn_dyn1) )) );
				if (( child is global::Loreline.Runtime.NIfStatement )) {
					(((global::Loreline.Runtime.NIfStatement) (child) )).conditionStyle = ((int) (2) );
				}
				else if (( child is global::Loreline.Runtime.NChoiceOption )) {
					(((global::Loreline.Runtime.NChoiceOption) (child) )).conditionStyle = ((int) (2) );
				}
				
				return null;
			}
		}
		
		
	}
}



#pragma warning disable 109, 114, 219, 429, 168, 162, IL2026, IL2070, IL2072, IL2060, CS0108
namespace Loreline.Runtime {
	public class AstUtils_usePlainConditions_142__Fun : global::Loreline.Internal.Lang.Function {
		
		public AstUtils_usePlainConditions_142__Fun() : base(2, 0) {
		}
		
		
		public static global::Loreline.Runtime.AstUtils_usePlainConditions_142__Fun __hx_current;
		
		public override object __hx_invoke2_o(double __fn_float1, object __fn_dyn1, double __fn_float2, object __fn_dyn2) {
			global::Loreline.Runtime.Node _ = ( (( __fn_dyn2 == global::Loreline.Internal.Lang.Runtime.undefined )) ? (((global::Loreline.Runtime.Node) (((object) (__fn_float2) )) )) : (((global::Loreline.Runtime.Node) (__fn_dyn2) )) );
			global::Loreline.Runtime.Node child = ( (( __fn_dyn1 == global::Loreline.Internal.Lang.Runtime.undefined )) ? (((global::Loreline.Runtime.Node) (((object) (__fn_float1) )) )) : (((global::Loreline.Runtime.Node) (__fn_dyn1) )) );
			if (( child is global::Loreline.Runtime.NIfStatement )) {
				(((global::Loreline.Runtime.NIfStatement) (child) )).conditionStyle = ((int) (0) );
			}
			else if (( child is global::Loreline.Runtime.NChoiceOption )) {
				(((global::Loreline.Runtime.NChoiceOption) (child) )).conditionStyle = ((int) (0) );
			}
			
			return null;
		}
		
		
	}
}



#pragma warning disable 109, 114, 219, 429, 168, 162, IL2026, IL2070, IL2072, IL2060, CS0108
namespace Loreline.Runtime {
	public class AstUtils_reindentFunctions_150__Fun : global::Loreline.Internal.Lang.Function {
		
		public AstUtils_reindentFunctions_150__Fun(string oldIndent, string newIndent) : base(2, 0) {
			this.oldIndent = oldIndent;
			this.newIndent = newIndent;
		}
		
		
		public override object __hx_invoke2_o(double __fn_float1, object __fn_dyn1, double __fn_float2, object __fn_dyn2) {
			global::Loreline.Runtime.Node _ = ( (( __fn_dyn2 == global::Loreline.Internal.Lang.Runtime.undefined )) ? (((global::Loreline.Runtime.Node) (((object) (__fn_float2) )) )) : (((global::Loreline.Runtime.Node) (__fn_dyn2) )) );
			global::Loreline.Runtime.Node child = ( (( __fn_dyn1 == global::Loreline.Internal.Lang.Runtime.undefined )) ? (((global::Loreline.Runtime.Node) (((object) (__fn_float1) )) )) : (((global::Loreline.Runtime.Node) (__fn_dyn1) )) );
			if (( child is global::Loreline.Runtime.NFunctionDecl )) {
				global::Loreline.Runtime.NFunctionDecl func = ((global::Loreline.Runtime.NFunctionDecl) (child) );
				if (( ( ( func.code != null ) && ( func.code.Length > 0 ) ) &&  ! (func.external)  )) {
					func.code = global::Loreline.Runtime.AstUtils.reindentCode(func.code, this.oldIndent, this.newIndent);
				}
				
			}
			
			return null;
		}
		
		
		public string oldIndent;
		
		public string newIndent;
		
	}
}



#pragma warning disable 109, 114, 219, 429, 168, 162, IL2026, IL2070, IL2072, IL2060, CS0108
namespace Loreline.Runtime {
	public class AstUtils_insertLocalizationKeys_174__Fun : global::Loreline.Internal.Lang.Function {
		
		public AstUtils_insertLocalizationKeys_174__Fun(global::Loreline.Internal.Ds.StringMap existingIds) : base(2, 0) {
			this.existingIds = existingIds;
		}
		
		
		public override object __hx_invoke2_o(double __fn_float1, object __fn_dyn1, double __fn_float2, object __fn_dyn2) {
			global::Loreline.Runtime.Node _ = ( (( __fn_dyn2 == global::Loreline.Internal.Lang.Runtime.undefined )) ? (((global::Loreline.Runtime.Node) (((object) (__fn_float2) )) )) : (((global::Loreline.Runtime.Node) (__fn_dyn2) )) );
			global::Loreline.Runtime.Node child = ( (( __fn_dyn1 == global::Loreline.Internal.Lang.Runtime.undefined )) ? (((global::Loreline.Runtime.Node) (((object) (__fn_float1) )) )) : (((global::Loreline.Runtime.Node) (__fn_dyn1) )) );
			if (( child is global::Loreline.Runtime.AstNode )) {
				global::Loreline.Runtime.AstNode astChild = ((global::Loreline.Runtime.AstNode) (child) );
				if (( astChild.trailingComments != null )) {
					int _g = 0;
					global::Loreline.Internal.Root.Array _g1 = astChild.trailingComments;
					while (( _g < _g1.length )) {
						global::Loreline.Runtime.Comment c = ((global::Loreline.Runtime.Comment) (_g1.__get(_g)) );
						 ++ _g;
						if (c.isHash) {
							string key = c.content.Trim();
							this.existingIds.@set(((string) (key) ), ((object) (true) ));
						}
						
					}
					
				}
				
				if (( astChild.leadingComments != null )) {
					int _g2 = 0;
					global::Loreline.Internal.Root.Array _g3 = astChild.leadingComments;
					while (( _g2 < _g3.length )) {
						global::Loreline.Runtime.Comment c1 = ((global::Loreline.Runtime.Comment) (_g3.__get(_g2)) );
						 ++ _g2;
						if (c1.isHash) {
							string key1 = c1.content.Trim();
							this.existingIds.@set(((string) (key1) ), ((object) (true) ));
						}
						
					}
					
				}
				
			}
			
			return null;
		}
		
		
		public global::Loreline.Internal.Ds.StringMap existingIds;
		
	}
}



#pragma warning disable 109, 114, 219, 429, 168, 162, IL2026, IL2070, IL2072, IL2060, CS0108
namespace Loreline.Runtime {
	public class AstUtils_insertLocalizationKeys_186__Fun : global::Loreline.Internal.Lang.Function {
		
		public AstUtils_insertLocalizationKeys_186__Fun(global::Loreline.Internal.Root.Array sourceLines, global::Loreline.Runtime.Random rng, global::Loreline.Internal.Root.Array insertions, global::Loreline.Internal.Ds.StringMap existingIds) : base(2, 0) {
			this.sourceLines = sourceLines;
			this.rng = rng;
			this.insertions = insertions;
			this.existingIds = existingIds;
		}
		
		
		public override object __hx_invoke2_o(double __fn_float1, object __fn_dyn1, double __fn_float2, object __fn_dyn2) {
			unchecked {
				global::Loreline.Runtime.Node _ = ( (( __fn_dyn2 == global::Loreline.Internal.Lang.Runtime.undefined )) ? (((global::Loreline.Runtime.Node) (((object) (__fn_float2) )) )) : (((global::Loreline.Runtime.Node) (__fn_dyn2) )) );
				global::Loreline.Runtime.Node child = ( (( __fn_dyn1 == global::Loreline.Internal.Lang.Runtime.undefined )) ? (((global::Loreline.Runtime.Node) (((object) (__fn_float1) )) )) : (((global::Loreline.Runtime.Node) (__fn_dyn1) )) );
				global::Loreline.Runtime.NStringLiteral str = null;
				if (( child is global::Loreline.Runtime.NTextStatement )) {
					str = (((global::Loreline.Runtime.NTextStatement) (child) )).content;
				}
				else if (( child is global::Loreline.Runtime.NDialogueStatement )) {
					str = (((global::Loreline.Runtime.NDialogueStatement) (child) )).content;
				}
				else if (( child is global::Loreline.Runtime.NChoiceOption )) {
					str = (((global::Loreline.Runtime.NChoiceOption) (child) )).text;
				}
				
				if (( str != null )) {
					int endLine = global::Loreline.Runtime.AstUtils.getStringEndLine(str);
					int lineIdx = ( endLine - 1 );
					if (( ( ( lineIdx >= 0 ) && ( lineIdx < this.sourceLines.length ) ) && global::Loreline.Runtime.AstUtils.lineHasHashComment(global::Loreline.Internal.Lang.Runtime.toString(this.sourceLines.__get(lineIdx))) )) {
						return null;
					}
					
					string id = null;
					int iterations = 0;
					do {
						id = global::Loreline.Runtime.AstUtils.randomId(this.rng, ( 4 + ((int) (( iterations * 0.01 )) ) ));
						 ++ iterations;
					}
					while (this.existingIds.exists(id));
					this.existingIds.@set(((string) (id) ), ((object) (true) ));
					object __temp_stmt2 = null;
					{
						string __temp_odecl1 = global::Loreline.Internal.Lang.Runtime.concat(" #", id);
						__temp_stmt2 = new global::Loreline.Internal.Lang.DynamicObject(new int[]{1291439277}, new object[]{__temp_odecl1}, new int[]{1614780307}, new double[]{((double) (( str.pos.offset + str.pos.length )) )});
					}
					
					this.insertions.push(__temp_stmt2);
				}
				
				return null;
			}
		}
		
		
		public global::Loreline.Internal.Root.Array sourceLines;
		
		public global::Loreline.Runtime.Random rng;
		
		public global::Loreline.Internal.Root.Array insertions;
		
		public global::Loreline.Internal.Ds.StringMap existingIds;
		
	}
}



#pragma warning disable 109, 114, 219, 429, 168, 162, IL2026, IL2070, IL2072, IL2060, CS0108
namespace Loreline.Runtime {
	public class AstUtils_insertLocalizationKeys_215__Fun : global::Loreline.Internal.Lang.Function {
		
		public AstUtils_insertLocalizationKeys_215__Fun() : base(2, 1) {
		}
		
		
		public static global::Loreline.Runtime.AstUtils_insertLocalizationKeys_215__Fun __hx_current;
		
		public override double __hx_invoke2_f(double __fn_float1, object __fn_dyn1, double __fn_float2, object __fn_dyn2) {
			object b = ( (( __fn_dyn2 == global::Loreline.Internal.Lang.Runtime.undefined )) ? (((object) (__fn_float2) )) : (((object) (__fn_dyn2) )) );
			object a = ( (( __fn_dyn1 == global::Loreline.Internal.Lang.Runtime.undefined )) ? (((object) (__fn_float1) )) : (((object) (__fn_dyn1) )) );
			return ((double) (( ((int) (global::Loreline.Internal.Lang.Runtime.getField_f(b, "offset", 1614780307, true)) ) - ((int) (global::Loreline.Internal.Lang.Runtime.getField_f(a, "offset", 1614780307, true)) ) )) );
		}
		
		
	}
}



#pragma warning disable 109, 114, 219, 429, 168, 162, IL2026, IL2070, IL2072, IL2060, CS0108
namespace Loreline.Runtime {
	public class AstUtils_removeLocalizationKeys_227__Fun : global::Loreline.Internal.Lang.Function {
		
		public AstUtils_removeLocalizationKeys_227__Fun(global::Loreline.Internal.Root.Array removals, string content) : base(2, 0) {
			this.removals = removals;
			this.content = content;
		}
		
		
		public override object __hx_invoke2_o(double __fn_float1, object __fn_dyn1, double __fn_float2, object __fn_dyn2) {
			unchecked {
				global::Loreline.Runtime.Node _ = ( (( __fn_dyn2 == global::Loreline.Internal.Lang.Runtime.undefined )) ? (((global::Loreline.Runtime.Node) (((object) (__fn_float2) )) )) : (((global::Loreline.Runtime.Node) (__fn_dyn2) )) );
				global::Loreline.Runtime.Node child = ( (( __fn_dyn1 == global::Loreline.Internal.Lang.Runtime.undefined )) ? (((global::Loreline.Runtime.Node) (((object) (__fn_float1) )) )) : (((global::Loreline.Runtime.Node) (__fn_dyn1) )) );
				if (( child is global::Loreline.Runtime.AstNode )) {
					global::Loreline.Runtime.AstNode astChild = ((global::Loreline.Runtime.AstNode) (child) );
					{
						global::Loreline.Internal.Root.Array comments = astChild.trailingComments;
						if (( comments != null )) {
							int _g = 0;
							while (( _g < comments.length )) {
								global::Loreline.Runtime.Comment c = ((global::Loreline.Runtime.Comment) (comments.__get(_g)) );
								 ++ _g;
								if (c.isHash) {
									int start = c.pos.offset;
									int end = ( c.pos.offset + c.pos.length );
									while (( start > 0 )) {
										object ch = global::Loreline.Internal.Lang.StringExt.charCodeAt(this.content, ( start - 1 ));
										if (( global::Loreline.Internal.Lang.Runtime.eq(ch, 32) || global::Loreline.Internal.Lang.Runtime.eq(ch, 9) )) {
											 -- start;
										}
										else {
											break;
										}
										
									}
									
									this.removals.push(new global::Loreline.Internal.Lang.DynamicObject(new int[]{}, new object[]{}, new int[]{5047259, 67859554}, new double[]{((double) (end) ), ((double) (start) )}));
								}
								
							}
							
						}
						
					}
					
					{
						global::Loreline.Internal.Root.Array comments1 = astChild.leadingComments;
						if (( comments1 != null )) {
							int _g1 = 0;
							while (( _g1 < comments1.length )) {
								global::Loreline.Runtime.Comment c1 = ((global::Loreline.Runtime.Comment) (comments1.__get(_g1)) );
								 ++ _g1;
								if (c1.isHash) {
									int start1 = c1.pos.offset;
									int end1 = ( c1.pos.offset + c1.pos.length );
									while (( start1 > 0 )) {
										object ch1 = global::Loreline.Internal.Lang.StringExt.charCodeAt(this.content, ( start1 - 1 ));
										if (( global::Loreline.Internal.Lang.Runtime.eq(ch1, 32) || global::Loreline.Internal.Lang.Runtime.eq(ch1, 9) )) {
											 -- start1;
										}
										else {
											break;
										}
										
									}
									
									this.removals.push(new global::Loreline.Internal.Lang.DynamicObject(new int[]{}, new object[]{}, new int[]{5047259, 67859554}, new double[]{((double) (end1) ), ((double) (start1) )}));
								}
								
							}
							
						}
						
					}
					
				}
				
				return null;
			}
		}
		
		
		public global::Loreline.Internal.Root.Array removals;
		
		public string content;
		
	}
}



#pragma warning disable 109, 114, 219, 429, 168, 162, IL2026, IL2070, IL2072, IL2060, CS0108
namespace Loreline.Runtime {
	public class AstUtils_removeLocalizationKeys_257__Fun : global::Loreline.Internal.Lang.Function {
		
		public AstUtils_removeLocalizationKeys_257__Fun() : base(2, 1) {
		}
		
		
		public static global::Loreline.Runtime.AstUtils_removeLocalizationKeys_257__Fun __hx_current;
		
		public override double __hx_invoke2_f(double __fn_float1, object __fn_dyn1, double __fn_float2, object __fn_dyn2) {
			object b = ( (( __fn_dyn2 == global::Loreline.Internal.Lang.Runtime.undefined )) ? (((object) (__fn_float2) )) : (((object) (__fn_dyn2) )) );
			object a = ( (( __fn_dyn1 == global::Loreline.Internal.Lang.Runtime.undefined )) ? (((object) (__fn_float1) )) : (((object) (__fn_dyn1) )) );
			return ((double) (( ((int) (global::Loreline.Internal.Lang.Runtime.getField_f(b, "start", 67859554, true)) ) - ((int) (global::Loreline.Internal.Lang.Runtime.getField_f(a, "start", 67859554, true)) ) )) );
		}
		
		
	}
}



#pragma warning disable 109, 114, 219, 429, 168, 162, IL2026, IL2070, IL2072, IL2060, CS0108
namespace Loreline.Runtime {
	public class AstUtils_extractTranslations_304__Fun : global::Loreline.Internal.Lang.Function {
		
		public AstUtils_extractTranslations_304__Fun(global::Loreline.Internal.Ds.StringMap result) : base(2, 0) {
			this.result = result;
		}
		
		
		public override object __hx_invoke2_o(double __fn_float1, object __fn_dyn1, double __fn_float2, object __fn_dyn2) {
			global::Loreline.Runtime.Node _ = ( (( __fn_dyn2 == global::Loreline.Internal.Lang.Runtime.undefined )) ? (((global::Loreline.Runtime.Node) (((object) (__fn_float2) )) )) : (((global::Loreline.Runtime.Node) (__fn_dyn2) )) );
			global::Loreline.Runtime.Node child = ( (( __fn_dyn1 == global::Loreline.Internal.Lang.Runtime.undefined )) ? (((global::Loreline.Runtime.Node) (((object) (__fn_float1) )) )) : (((global::Loreline.Runtime.Node) (__fn_dyn1) )) );
			global::Loreline.Runtime.NStringLiteral str = null;
			global::Loreline.Runtime.AstNode astNode = null;
			if (( child is global::Loreline.Runtime.NTextStatement )) {
				astNode = ((global::Loreline.Runtime.AstNode) (child) );
				str = (((global::Loreline.Runtime.NTextStatement) (child) )).content;
			}
			else if (( child is global::Loreline.Runtime.NDialogueStatement )) {
				astNode = ((global::Loreline.Runtime.AstNode) (child) );
				str = (((global::Loreline.Runtime.NDialogueStatement) (child) )).content;
			}
			
			if (( ( str != null ) && ( astNode != null ) )) {
				string hashId = global::Loreline.Runtime.AstUtils.findHashComment(astNode, str);
				if (( hashId != null )) {
					this.result.@set(((string) (hashId) ), ((object) (str) ));
				}
				
			}
			
			return null;
		}
		
		
		public global::Loreline.Internal.Ds.StringMap result;
		
	}
}



#pragma warning disable 109, 114, 219, 429, 168, 162, IL2026, IL2070, IL2072, IL2060, CS0108
namespace Loreline.Runtime {
	public class AstUtils_extractTranslatableEntries_326__Fun : global::Loreline.Internal.Lang.Function {
		
		public AstUtils_extractTranslatableEntries_326__Fun(global::Loreline.Internal.Root.Array result) : base(2, 0) {
			this.result = result;
		}
		
		
		public override object __hx_invoke2_o(double __fn_float1, object __fn_dyn1, double __fn_float2, object __fn_dyn2) {
			global::Loreline.Runtime.Node _ = ( (( __fn_dyn2 == global::Loreline.Internal.Lang.Runtime.undefined )) ? (((global::Loreline.Runtime.Node) (((object) (__fn_float2) )) )) : (((global::Loreline.Runtime.Node) (__fn_dyn2) )) );
			global::Loreline.Runtime.Node child = ( (( __fn_dyn1 == global::Loreline.Internal.Lang.Runtime.undefined )) ? (((global::Loreline.Runtime.Node) (((object) (__fn_float1) )) )) : (((global::Loreline.Runtime.Node) (__fn_dyn1) )) );
			global::Loreline.Runtime.AstNode astNode = null;
			global::Loreline.Runtime.NStringLiteral str = null;
			if (( child is global::Loreline.Runtime.NTextStatement )) {
				astNode = ((global::Loreline.Runtime.AstNode) (child) );
				str = (((global::Loreline.Runtime.NTextStatement) (child) )).content;
			}
			else if (( child is global::Loreline.Runtime.NDialogueStatement )) {
				astNode = ((global::Loreline.Runtime.AstNode) (child) );
				str = (((global::Loreline.Runtime.NDialogueStatement) (child) )).content;
			}
			else if (( child is global::Loreline.Runtime.NChoiceOption )) {
				global::Loreline.Runtime.NChoiceOption opt = ((global::Loreline.Runtime.NChoiceOption) (child) );
				if (( opt.text != null )) {
					astNode = ((global::Loreline.Runtime.AstNode) (child) );
					str = opt.text;
				}
				
			}
			
			if (( ( str != null ) && ( astNode != null ) )) {
				string hashId = global::Loreline.Runtime.AstUtils.findHashComment(astNode, str);
				if (( hashId != null )) {
					this.result.push(new global::Loreline.Internal.Lang.DynamicObject(new int[]{23515, 5744817}, new object[]{hashId, str}, new int[]{}, new double[]{}));
				}
				
			}
			
			return null;
		}
		
		
		public global::Loreline.Internal.Root.Array result;
		
	}
}


